{"version":3,"sources":["./src/app/authentification/authentification.page.html","./src/app/authentification/authentification-routing.module.ts","./src/app/authentification/authentification.module.ts","./src/app/authentification/authentification.page.scss","./src/app/authentification/authentification.page.ts"],"names":[],"mappings":"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","file":"authentification-authentification-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>authentification</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <form [formGroup]=\\\"userForm\\\" (ngSubmit)=\\\"onLogin()\\\">\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Username</ion-label>\\n      <ion-input formControlName=\\\"username\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Email</ion-label>\\n      <ion-input formControlName=\\\"email\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Password</ion-label>\\n      <ion-input type=\\\"password\\\" formControlName=\\\"password\\\"></ion-input>\\n    </ion-item>\\n\\n\\n\\n    <ion-button expand=\\\"full\\\" [disabled]=\\\"!userForm.valid\\\" type=\\\"submit\\\">Sign in</ion-button>\\n    <ion-button expand=\\\"full\\\" [disabled]=\\\"!userForm.valid\\\" type=\\\"button\\\" color=\\\"secondary\\\" (click)=\\\"signUp()\\\">Register\\n    </ion-button>\\n    <ion-button expand=\\\"full\\\" type=\\\"button\\\" color=\\\"tertiary\\\" (click)=\\\"openPwReset()\\\">Forgot password?</ion-button>\\n\\n\\n  </form>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AuthentificationPage } from './authentification.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AuthentificationPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AuthentificationPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { AuthentificationPageRoutingModule } from \"./authentification-routing.module\";\n\nimport { AuthentificationPage } from \"./authentification.page\";\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tIonicModule,\n\t\tAuthentificationPageRoutingModule,\n\t\tReactiveFormsModule,\n\t],\n\tdeclarations: [AuthentificationPage],\n})\nexport class AuthentificationPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2F1dGhlbnRpZmljYXRpb24vYXV0aGVudGlmaWNhdGlvbi5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from \"@angular/core\";\nimport { ApiService } from \"../services/api.service\";\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\nimport { AlertController, ToastController } from \"@ionic/angular\";\nimport { Router } from \"@angular/router\";\n\n@Component({\n\tselector: \"app-authentification\",\n\ttemplateUrl: \"./authentification.page.html\",\n\tstyleUrls: [\"./authentification.page.scss\"],\n})\nexport class AuthentificationPage implements OnInit {\n\tuserForm: FormGroup;\n\n\tconstructor(\n\t\tprivate api: ApiService,\n\t\tprivate fb: FormBuilder,\n\t\tprivate alertCtrl: AlertController,\n\t\tprivate toastCtrl: ToastController,\n\t\tprivate router: Router\n\t) {}\n\n\tngOnInit() {\n\t\tthis.userForm = this.fb.group({\n\t\t\tusername: [\"\", Validators.required],\n\t\t\temail: \"\",\n\t\t\tpassword: [\"\", Validators.required],\n\t\t});\n\t}\n\n\tonLogin() {\n\t\tthis.api\n\t\t\t.login(this.userForm.value.username, this.userForm.value.password)\n\t\t\t.subscribe(\n\t\t\t\t(res) => {\n\t\t\t\t\tconsole.log(\"login finished\");\n\t\t\t\t\tthis.api.ActivateUserIsAuthenticated();\n\t\t\t\t\tconsole.log(this.api.userIsAuthenticated);\n\t\t\t\t\tthis.router.navigateByUrl(\"/tabs/stone\");\n\t\t\t\t},\n\t\t\t\tasync (err) => {\n\t\t\t\t\tconst alert = await this.alertCtrl.create({\n\t\t\t\t\t\theader: err.error.code,\n\t\t\t\t\t\tsubHeader: err.error.data.status,\n\t\t\t\t\t\tmessage: err.error.message,\n\t\t\t\t\t\tbuttons: [\"OK\"],\n\t\t\t\t\t});\n\t\t\t\t\tawait alert.present();\n\t\t\t\t\tconsole.log(this.api.userIsAuthenticated);\n\t\t\t\t}\n\t\t\t);\n\n\t\t//console.log(this.api.userIsAuthenticated);\n\t}\n\n\tsignUp() {\n\t\tthis.api\n\t\t\t.signUp(\n\t\t\t\tthis.userForm.value.username,\n\t\t\t\tthis.userForm.value.email,\n\t\t\t\tthis.userForm.value.password\n\t\t\t)\n\t\t\t.subscribe(\n\t\t\t\tasync (res) => {\n\t\t\t\t\tconst toast = await this.toastCtrl.create({\n\t\t\t\t\t\tmessage: res[\"message\"],\n\t\t\t\t\t\tduration: 3000,\n\t\t\t\t\t});\n\t\t\t\t\ttoast.present();\n\t\t\t\t},\n\t\t\t\t(err) => {\n\t\t\t\t\tthis.showError(err);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tasync openPwReset() {\n\t\tconst alert = await this.alertCtrl.create({\n\t\t\theader: \"Forgot password?\",\n\t\t\tmessage: \"Enter your email or username to retrieve a new password\",\n\t\t\tinputs: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\tname: \"usernameOrEmail\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\trole: \"cancel\",\n\t\t\t\t\ttext: \"Back\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Reset Password\",\n\t\t\t\t\thandler: (data) => {\n\t\t\t\t\t\tthis.resetPw(data[\"usernameOrEmail\"]);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tawait alert.present();\n\t}\n\n\tresetPw(usernameOrEmail) {\n\t\tthis.api.resetPassword(usernameOrEmail).subscribe(\n\t\t\tasync (res) => {\n\t\t\t\tconst toast = await this.toastCtrl.create({\n\t\t\t\t\tmessage: res[\"message\"],\n\t\t\t\t\tduration: 2000,\n\t\t\t\t});\n\t\t\t\ttoast.present();\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tthis.showError(err);\n\t\t\t}\n\t\t);\n\t}\n\n\tasync showError(err) {\n\t\tconst alert = await this.alertCtrl.create({\n\t\t\theader: err.error.code,\n\t\t\tsubHeader: err.error.data.status,\n\t\t\tmessage: err.error.message,\n\t\t\tbuttons: [\"OK\"],\n\t\t});\n\t\tawait alert.present();\n\t}\n}\n"],"sourceRoot":"webpack:///"}